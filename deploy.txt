# build image
docker build -t apu:latest .
# docker build -t apu:latest . --no-cache

# switch account to scplusntu@gmail.com
gcloud config set account scplusntu@gmail.com

# set project 
gcloud config set project scplus2 && PROJECTID=$(gcloud config get-value project)

# ultilize Googld Builds to build image
docker build . -t gcr.io/$PROJECTID/apu
# docker build . --no-cache -t gcr.io/$PROJECTID/apu

# test locally
# docker run --rm -p 9999:80 --name apu apu:latest
# docker run --rm -p 9999:80 --name apu gcr.io/$PROJECTID/apu
# see http://localhost:9999/

docker push gcr.io/$PROJECTID/apu

# deploy on gcp cloud run
gcloud run deploy --image gcr.io/$PROJECTID/apu --port=80 --platform managed --region asia-east1

